<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <style>
      html,
      body {
        overflow: hidden;
        background: url("images/angrybirdsbackground.png") no-repeat;
        background-size: 100vw 100vh;
        background-position: center;
      }

      .character {
        display: none;
        position: absolute;
      }

      .character img {
        height: 100px;
      }

      body {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        justify-content: space-between;
        align-content: flex-start;
        height: 100vh;
      }

      .sun {
        background: url("./images/sun.png");
        background-size: cover;
        height: 120px;
        width: 120px;
        position: absolute;
        top: 30px;
        right: 30px;
      }
    </style>
    <link rel="stylesheet" href="reset.css" />
  </head>

  <body>
    <div class="sun"></div>

    <script src="https://cdn.jsdelivr.net/npm/gsap@3.0.1/dist/gsap.min.js"></script>
    <script>
      const randomFloat = (min, max) => Math.random() * (max - min) + min;
      const randomInt = (min, max) => Math.floor(Math.random() * (max - min + 1) + min);
      const shuffle = array => array.sort(() => Math.random() - 0.5);

      let floorPosition = 110;
      let totalMonsters = 40;
      let characters = Array(totalMonsters)
        .fill()
        .map((x, idx) => idx);

      characters.forEach(characterId => {
        const domEl = document.createElement("div");
        domEl.className = "character";
        domEl.innerHTML = `<img src='images/PNG/${characterId}.png'>`;
        document.body.appendChild(domEl);
      });

      function generateJustOne(requestedMonster) {
        let randomCharacter = requestedMonster || randomInt(0, totalMonsters - 1);
        let character = document.querySelectorAll(".character")[randomCharacter];

        character.style.display = "block";
        character.style.bottom = `${floorPosition}px`;

        return character;
      }

      gsap.to(".sun", 1.5, {
        scale: 0.8,
        yoyo: 1,
        repeat: -1
      });

      // example 1
      // let character = generateJustOne();
      // gsap.to(character, 1, {
      //   scale: 1,
      //   left: "+=30vw",
      //   ease: "power1.out"
      // });

      // example 2
      // let character = generateJustOne();
      // gsap.to(character, 1, {
      //   scale: 1,
      //   left: `+=${window.innerWidth / 2 - 200}`,
      //   bottom: floorPosition + 40,
      //   scale: 2,
      //   ease: "power1.inOut"
      // });

      // example 3
      // let character = generateJustOne();
      // let left = `${window.innerWidth / 2 - 100}px`;

      // gsap.fromTo(
      //   character,
      //   {
      //     left: `${left}`,
      //     bottom: 1000,
      //     scale: 1,
      //     opacity: 0
      //   },
      //   {
      //     left: `${left}`,
      //     bottom: floorPosition,
      //     opacity: 1,
      //     duration: 1.5,
      //     rotation: 360 * 3,
      //     ease: "bounce"
      //   }
      // );

      // example 4

      // document.querySelectorAll(".character").forEach((character, idx) => {
      //   if (idx > 10) return;

      //   character.style.display = "block";
      //   character.style.left = `${180 * idx}px`;
      //   character.style.bottom = `${floorPosition}px`;

      //   gsap.from(character, {
      //     scale: 0.5,
      //     opacity: 0,
      //     delay: 0.25 * idx
      //   });

      //   gsap.to(character, {
      //     duration: 2,
      //     scale: 1,
      //     opacity: 1,
      //     delay: 0.25 * idx,
      //     stagger: 1,
      //     ease: "elastic",
      //     rotation: idx === 5 ? 360 : 0
      //   });
      // });

      // example 5
      // let character = generateJustOne();

      // var tl = new TimelineMax({ repeat: 0 });
      // tl.to(character, 0, { bottom: floorPosition + 200 })
      //   .to(character, 1, {
      //     left: `+=${window.innerWidth}`,
      //     rotation: 360
      //   })
      //   .to(character, 1, {
      //     transformOrigin: "left",
      //     rotation: -180,
      //     left: `${window.innerWidth - 50}`,
      //     bottom: floorPosition
      //   });

      // example 6
      // let character = generateJustOne(21);

      // var tl = new TimelineMax({ repeat: 0 });
      // tl.to(character, 0, { bottom: floorPosition, scaleX: -1 })
      //   .to(character, 1, { bottom: floorPosition, left: `+=500` })
      //   .to(character, 1, {
      //     scaleX: 1
      //   })
      //   .to(character, 1, {
      //     scaleX: 1,
      //     left: `-=500`
      //   });

      // example 7
      let character = generateJustOne();

      var tl = new TimelineMax({ repeat: 0 });
      tl.to(character, 0, { bottom: floorPosition, left: `${window.innerWidth / 2}` })
        .to(character, 1.5, { bottom: floorPosition + 300, rotation: 100 })
        .to(character, 0.5, { bottom: floorPosition, rotation: 0, ease: Bounce.easeOut });
    </script>
  </body>
</html>
